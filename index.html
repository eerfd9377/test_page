<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>일본 주식 우대권 매니저 (Demo)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <div>
      <h1>일본 주식 우대권 매니저 <span class="badge">Demo</span></h1>
      <p class="subtitle">로컬 저장(localStorage) 기반 데모 — 로그인/서버 없이 동작</p>
    </div>
    <div class="header-actions">
      <button id="btnExport" class="btn secondary">내보내기(JSON)</button>
      <label class="btn secondary file-label">
        가져오기(JSON)
        <input id="fileImport" type="file" accept="application/json" hidden />
      </label>
      <button id="btnReset" class="btn danger">초기화</button>
    </div>
  </header>

  <main class="layout">
    <section class="panel">
      <h2>우대권 추가</h2>
      <form id="perkForm" class="form">
        <div class="grid">
          <label>
            회사명
            <input name="company" required placeholder="예: AEON" />
          </label>
          <label>
            종목코드(티커)
            <input name="ticker" placeholder="예: 8267" />
          </label>
          <label>
            우대 종류
            <select name="category">
              <option value="coupon">쿠폰/할인권</option>
              <option value="voucher">상품권/기프트</option>
              <option value="food">식사권</option>
              <option value="transport">교통/여행</option>
              <option value="other">기타</option>
            </select>
          </label>
          <label>
            발급/도착일
            <input name="receivedAt" type="date" />
          </label>
          <label>
            만료일
            <input name="expiresAt" type="date" />
          </label>
          <label>
            수량
            <input name="quantity" type="number" min="1" value="1" required />
          </label>
        </div>

        <label>
          메모
          <textarea name="memo" rows="3" placeholder="사용처, 조건(몇 주 이상 보유), 필요한 인증 등"></textarea>
        </label>

        <div class="row">
          <label class="checkbox">
            <input name="isDigital" type="checkbox" />
            디지털(코드/링크) 우대권
          </label>
          <label>
            링크(선택)
            <input name="link" type="url" placeholder="https://..." />
          </label>
        </div>

        <div class="row end">
          <button class="btn primary" type="submit">추가</button>
        </div>
      </form>

      <div class="hint">
        <strong>힌트:</strong> 실제 앱에서는 사진/스캔, OCR, 알림(만료 30/7/1일 전), 가족 공유, 증빙(주주명부/우편물) 같은 기능을 고려하면 좋아요.
      </div>
    </section>

    <section class="panel">
      <div class="panel-header">
        <h2>보유 우대권</h2>
        <div class="controls">
          <input id="search" class="search" placeholder="검색: 회사명/티커/메모" />
          <select id="filterStatus">
            <option value="all">전체</option>
            <option value="active">사용가능</option>
            <option value="used">사용완료</option>
            <option value="expired">만료</option>
          </select>
          <select id="sortBy">
            <option value="expiresAsc">만료 임박순</option>
            <option value="receivedDesc">최근 수령순</option>
            <option value="companyAsc">회사명(A→Z)</option>
          </select>
        </div>
      </div>

      <div id="stats" class="stats"></div>
      <div id="list" class="list"></div>

      <details class="details">
        <summary>데모의 한계 / 다음 단계</summary>
        <ul>
          <li>현재는 브라우저 <code>localStorage</code>에만 저장됩니다(동기화/백업 없음).</li>
          <li>푸시 알림, 캘린더 연동, 사진/OCR, 로그인, 가족 공유는 미구현입니다.</li>
          <li>다음 단계로는: DB 스키마 설계 → API(인증/권한) → 클라이언트(모바일/웹) → 알림 워커 순으로 확장 추천.</li>
        </ul>
      </details>
    </section>
  </main>

  <footer class="footer">
    <p>Demo — 데이터는 이 기기/브라우저에만 저장됩니다.</p>
  </footer>

  <template id="perkCardTpl">
    <article class="card">
      <div class="card-top">
        <div>
          <div class="title"></div>
          <div class="meta"></div>
        </div>
        <div class="pill"></div>
      </div>

      <div class="card-body">
        <div class="kv"></div>
        <div class="memo"></div>
      </div>

      <div class="card-actions">
        <button class="btn small secondary btnToggleUsed">사용/취소</button>
        <button class="btn small secondary btnDuplicate">복제</button>
        <button class="btn small danger btnDelete">삭제</button>
      </div>
    </article>
  </template>

  <script src="app.js"></script>
</body>
</html>
